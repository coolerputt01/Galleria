from rest_framework.generics import RetrieveAPIView
from rest_framework.exceptions import NotFound
from .models import User
from .serializers import PublicProfileSerializer

class PublicProfileView(RetrieveAPIView):
    queryset = User.objects.all()
    serializer_class = PublicProfileSerializer
    lookup_field = "display_name"

    def get_object(self):
        try:
            return super().get_object()
        except Exception:
            # Custom 404 response
            raise NotFound(detail="This profile does not exist. Please check the username.")